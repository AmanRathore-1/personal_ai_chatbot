// src/react/use-resource.ts
import { useEffect, useLayoutEffect, useMemo, useState } from "react";
import { getResourceFn } from "../core/getResourceFn.js";
import {
  createResourceFiber,
  unmountResource,
  renderResource,
  commitResource
} from "../core/ResourceFiber.js";
var shouldAvoidLayoutEffect = globalThis.__ASSISTANT_UI_DISABLE_LAYOUT_EFFECT__ === true;
var useIsomorphicLayoutEffect = shouldAvoidLayoutEffect ? useEffect : useLayoutEffect;
function useResource(element) {
  const [, rerender] = useState({});
  const fiber = useMemo(
    () => createResourceFiber(getResourceFn(element.type), () => rerender({})),
    [element.type, rerender]
  );
  const result = renderResource(fiber, element.props);
  useIsomorphicLayoutEffect(() => {
    return () => unmountResource(fiber);
  }, []);
  useIsomorphicLayoutEffect(() => {
    commitResource(fiber, result);
  });
  return result.state;
}
export {
  useResource
};
//# sourceMappingURL=use-resource.js.map